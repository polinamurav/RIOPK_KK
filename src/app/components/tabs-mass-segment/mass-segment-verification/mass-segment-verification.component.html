<form class="form" [formGroup]="form">
  <div class="mb-5">
    <app-layout-for-steps
      [isPanelDescHidden]="true"
      [headerText]="'Телефонная верификация'"
      [headerNumb]="1"
      [isNotAccordion]="true"
    >
      <div class="w-100">
        <div class="mb-4">
          <perfect-scrollbar>
            <nv-editable-table
              [canEditRows]="!readonlyForm"
              [canAddRows]="!readonlyForm"
              [tableHeaders]="phoneNumberEditableTableHeaders"
              [isDeleteObjLink]="true"
              [tableRows]="verificationData?.verificationPhones"
              [selectData]="statusData"
              [buttonName]="addButtonName"
              (savedRow)="savedRowEditableTable($event)"
              (removedRow)="removedRowEditableTable($event)"
            >
            </nv-editable-table>
          </perfect-scrollbar>
        </div>
      </div>
    </app-layout-for-steps>

    <app-layout-for-steps
      [isPanelDescHidden]="true"
      [headerText]="'Предварительно одобренные условия'"
      [headerNumb]="2"
      [isNotAccordion]="true"
    >
      <div class="w-100">
        <div class="mb-4">
          <mat-app-table
            [isSotring]="false"
            [footerIsHide]="true"
            [totalCount]="totalCount"
            [tableData]="chosenCreditInfoData"
            [itemLimit]="itemLimit"
          >
          </mat-app-table>
        </div>
      </div>
    </app-layout-for-steps>

    <app-layout-for-steps
      [isPanelDescHidden]="true"
      [headerText]="'Негативная информация, выявленная Системой'"
      [headerNumb]="3"
      [isNotAccordion]="true"
    >
      <div class="w-100">
        <div class="mb-4">
          <mat-app-table
            [isSotring]="false"
            [footerIsHide]="true"
            [totalCount]="totalCount"
            [tableData]="negativeInformationInfoData"
            [itemLimit]="itemLimit"
          >
          </mat-app-table>
        </div>
      </div>
    </app-layout-for-steps>

    <app-layout-for-steps
      [headerText]="'Негативная информация, выявленная Андеррайтером'"
      [isPanelDescHidden]="true"
      [headerNumb]="4"
      [isNotAccordion]="true"
    >
      <div class="w-100">
        <div class="mb-3 border-bottom">
          <div class="row m-0">
            <div class="col-6 p-0">
              <div
                class="row m-0 pt-2 pb-2"
                [ngClass]="{ 'border-bottom': i !== verificationChecklists - 1 }"
                *ngFor="let checklist of verificationChecklists; index as i"
              >
                <div class="col-9 d-flex align-items-center color-bank-gray">
                  {{ checklist?.dirChecklist?.nameRu }}
                </div>
                <div class="col-3 p-0 mt-2 text-right">
                  <mat-app-slide-toggle [isDisabled]="readonlyForm" [(value)]="checklist.result">
                  </mat-app-slide-toggle>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </app-layout-for-steps>

    <ng-container formGroupName="verifForm">
      <app-layout-for-steps
        [isPanelDescHidden]="true"
        [headerText]="'Решение Андеррайтера'"
        [headerNumb]="8"
        [isNotAccordion]="true"
      >
        <div class="w-100">
          <div class="row m-0">
            <div class="col-4">
              <div class="mb-4">
                <mat-app-search-select
                  formControlName="dirDecisionMakerDecisionId"
                  placeholder="Решение по заявке"
                  [options]="dirDecisionMakerDecisionList"
                >
                </mat-app-search-select>
              </div>
            </div>

            <div class="col-4 mt-2">
              <mat-app-slide-toggle formControlName="verificationDone" label="Данные верифицированы">
              </mat-app-slide-toggle>
            </div>

            <div *ngIf="form.get('verifForm').get('dirDecisionMakerDecisionId').value === 'DECLINE'" class="col-4">
              <div class="mb-4">
                <mat-app-search-select
                  formControlName="dirDecisionMakerDeclineReasonId"
                  placeholder="Отказ Андеррайтера"
                  [options]="dirDecisionMakerDeclineReasonList"
                >
                </mat-app-search-select>
              </div>
            </div>
          </div>

          <div class="row m-0">
            <div class="col-6">
              <app-form-field formControlName="comment" placeholder="Комментарий по заявке" type="text">
              </app-form-field>
            </div>
          </div>
        </div>
      </app-layout-for-steps>
    </ng-container>
  </div>

  <app-tabs-footer
    [configSrc]="footerConfigSource"
    [hideButtons]="readonlyForm"
    [buttonsDisabled]="isLoading"
    [userData]="userData"
    [commentList]="{
      chatUnderManagerList: chatUnderManagerList,
      chatUnderLimitOwnerList: chatUnderLimitOwnerList
    }"
    [commentsReadonly]="readonlyForm"
    [isNewMessageExists]="isNewMessageExists"
    (footerButtonClick)="onFooterButtonClick($event)"
  ></app-tabs-footer>
</form>
