<div class="close-btn-wrapper">
  <mat-app-button
    [mat-dialog-close]="'close'"
    [radius]="'round'"
    [className]="'custom-style-close-modal'"
    [backgroundColor]="'white'"
    [color]="'gray'"
    [hover]="'gray'"
    [border]="true"
  >
    <div type="" class="close-modal" [inlineSVG]="'../../../../../../../assets/close-1.svg'"></div>
  </mat-app-button>
</div>

<div class="new-client-modal-container">
  <form [formGroup]="formGroup">
    <div class="new-client-modal-header">
      <h3 class="new-client-modal-title">{{ title }}</h3>
    </div>

    <div class="new-client-modal-form-wrapper">
      <div class="row m-0 p-b">
        <div class="col-12">
          <app-form-field
            formControlName="pin"
            placeholder="Личный номер *"
            type="text"
            [maxLength]="11"
            [ngClass]="{ 'invalid-field': !isPinValid && !isSmsExist }"
          >
          </app-form-field>
          <p *ngIf="!isPinValid && !isSmsExist" class="fin-error">Некорректный Личный номер</p>
        </div>
        <div class="col-12">
          <app-form-field
            formControlName="phone"
            placeholder="Мобильный телефон  *"
            type="phoneNumber"
          ></app-form-field>
        </div>
      </div>

      <div class="bottom-block">
        <div class="row ml-0 mr-0 flex-no-wrap">
          <div class="align-self-center col-4">
            <mat-app-button
              [type]="'button'"
              [radius]="'semiRound'"
              [backgroundColor]="'blue'"
              [color]="'white'"
              (clickEvent)="sendSms()"
              [disabled]="formGroup.get('phone').invalid || isSmsExist"
            >
              Отправить SMS
            </mat-app-button>
          </div>
          <div class="align-self-center col-5 pt-2">
            <app-form-field formControlName="code" [maxLength]="4" placeholder="Ввод кода *" type="text">
            </app-form-field>
          </div>
          <div class="align-self-center col-3 sms-code-svg">
            <span *ngIf="codeIsTrue" [inlineSVG]="'../../../../../../assets/done.svg'"></span>
            <span
              *ngIf="!codeIsTrue && !!formGroup.get('code').value"
              [inlineSVG]="'../../../../../../assets/close-round.svg'"
            ></span>
          </div>
        </div>
      </div>
    </div>

    <div class="new-client-modal-footer">
      <div class="buttons-wrapper hard-width-container">
        <div class="save-cancel-buttons-wrapper">
          <mat-app-button
            [color]="'white'"
            [backgroundColor]="'blue'"
            [border]="true"
            [hover]="'blue'"
            [radius]="'semiRound'"
            [disabled]="!codeIsTrue || isLoading"
            (clickEvent)="sendRequest()"
            type="'submit'"
            ><span>Запросить данные</span>
          </mat-app-button>

          <mat-app-button
            [color]="'gray'"
            [backgroundColor]="'transparent'"
            [border]="true"
            [hover]="'gray'"
            [radius]="'semiRound'"
            [className]="'custom-style-cancel-button'"
            (clickEvent)="cancelButtonClick()"
            type=""
            ><span>Отменить</span>
          </mat-app-button>
        </div>
      </div>
    </div>
  </form>
</div>
