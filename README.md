1 АРХИТЕКТУРА ПРОГРАММНОГО СРЕДСТВА В НОТАЦИИ С4

На рисунке 1 представлен контейнерный уровень архитектуры программного средства.

<img width="930" height="575" alt="image" src="https://github.com/user-attachments/assets/16769db3-7de3-46ae-a38e-efa1664a7766" />

Рисунок 1 – Контейнерный уровень архитектуры программного средства 

Программное средство «Кредитный конвейер» предназначено для обработки и принятия решений по кредитным заявкам физических лиц. Основным элементом системы является веб-приложение, разработанное на Angular и TypeScript. Оно предоставляет удобный интерфейс для клиентов, кредитных менеджеров, специалистов по рискам и администраторов. Клиенты могут подать заявку и отслеживать её статус, менеджеры обрабатывают данные и принимают решения, а администраторы следят за стабильной и безопасной работой системы.
Все запросы от веб-приложения обрабатываются серверным API-приложением, реализованным на Java с использованием Spring MVC. Этот компонент выполняет основную бизнес-логику: регистрацию и обработку заявок, взаимодействие с внешними банковскими сервисами и управление процессом принятия решений. Для связи с другими частями системы сервер использует REST API, а также обращается к базе данных и сервису уведомлений.
Хранилищем данных является база PostgreSQL, где сохраняется информация о клиентах, заявках, результатах проверок и итоговых решениях. Она обеспечивает надёжное хранение и быстрый доступ к информации, необходимой для работы системы.
Отдельный сервис уведомлений, построенный на WebSocket, отвечает за информирование клиентов и сотрудников о ходе обработки заявок и результатах решений на электронную почту. Это позволяет пользователям получать актуальные данные в реальном времени.
Важным элементом архитектуры является интеграция с внешней банковской системой. Через REST API серверное приложение получает данные о кредитной истории и финансовом состоянии клиентов. Эти сведения используются при скоринговой проверке и помогают принимать более точные и обоснованные решения.
На рисунке 2 представлен компонентный уровень архитектуры программного средства.

<img width="974" height="644" alt="image" src="https://github.com/user-attachments/assets/05942f05-0d98-4dac-880a-c86536cf37ea" />

Рисунок 2 – Компонентный уровень архитектуры программного средства 

Компонентный уровень архитектуры кредитного конвейера представляет собой совокупность функциональных блоков, каждый из которых реализует определённые задачи и взаимодействует с другими через четко определённые интерфейсы.
Контейнер с API-приложением разбит на несколько контроллеров – компонентов, каждый из которых отвечает за специализированную функцию внутри системы. Веб-клиент, построенный с использованием Angular и TypeScript, общается с бекендом через REST API, обращаясь к соответствующим контроллерам.
User Controller управляет пользовательскими данными, включая регистрацию, обновление профиля и ролевой доступ. Он взаимодействует с базой данных, обеспечивая надежное хранение информации о клиентах и сотрудниках.
Security Controller, основанный на Spring Security, реализует механизмы аутентификации и авторизации, гарантируя, что к функционалу системы имеют доступ только уполномоченные пользователи с разными ролями – от клиентов до администраторов.
Decision Controller содержит логику принятия решений, включая расчеты рисков, используя данные заявок и внешних систем.
Document Controller занимается загрузкой, хранением и проверкой документов, необходимых для рассмотрения кредитных заявок, связывая клиентов, менеджеров и базу данных.
Application Controller служит центром обработки заявок – принимает новые заявки, обновляет их статусы, связывает с решениями и результатами проверок, обеспечивая сквозной бизнес-процесс.
Notification Component Controller формирует и отправляет уведомления пользователям, используя WebSocket для своевременного информирования клиентов и сотрудников о ходе обработки и результатах на электронную почту.
Banking Systems Facade – объединённый интерфейс для интеграции с внешними банковскими системами, системами документооборота и платёжными сервисами, обеспечивая прозрачное и унифицированное взаимодействие.
Вся ключевая информация – данные пользователей, заявки, документы, решения и уведомления – надёжно хранится в базе данных PostgreSQL, обеспечивая высокую производительность, целостность и доступность данных.
Кодовый уровень архитектуры программного средства представлен на рисунке 3.

<img width="974" height="757" alt="image" src="https://github.com/user-attachments/assets/512b6851-848a-42b8-a9fb-04366cd7ddcc" />

Рисунок 3 – Кодовый уровень архитектуры программного средства 

Кодовый уровень архитектуры программного средства «Кредитный конвейер» отражает структуру классов, реализующих бизнес-логику обработки кредитных заявок. В центре модели находится класс Application, который содержит ключевые атрибуты кредитной заявки: идентификатор, данные клиента, сумму кредита, срок и текущий статус. Класс предоставляет метод для обновления статуса, что позволяет отслеживать весь жизненный цикл заявки.
С классом Application связаны другие важные сущности. Класс Document хранит информацию о документах, прикреплённых к заявке: название, путь к файлу и тип документа. Он реализует методы генерации и отправки документов. Класс Decision описывает принятое решение по заявке, включая срок, сумму и результат одобрения. Он связан с конкретной заявкой и фиксирует итог обработки.
Класс User управляет данными пользователей системы: идентификатором, логином, паролем и ролью (клиент, менеджер, администратор). С ним связан класс Notification, который отвечает за хранение и отправку уведомлений. Уведомления содержат текст сообщения, дату отправки и привязаны к конкретному пользователю.
За безопасность отвечает класс Security, который хранит список пользователей и ролей, а также реализует методы аутентификации и авторизации. Он обеспечивает доступ к функциям системы только для проверенных ролей.
Отдельный компонент BankingSystemFacade – служит интерфейсом для взаимодействия с внешними банковскими системами. Он содержит параметры подключения и методы для отправки запросов и получения прогнозов кредитоспособности клиента. Этот фасад скрывает сложность интеграции и предоставляет единый способ работы с внешними сервисами.
Кодовый уровень архитектуры «Кредитного конвейера» демонстрирует чёткое разделение ответственности между классами: Application управляет заявками, Document и Decision обеспечивают документооборот и фиксацию решений, User и Notification отвечают за взаимодействие с пользователями, Security гарантирует защиту доступа, а BankingSystemFacade обеспечивает интеграцию с банковской инфраструктурой.

UML-Диаграммы

<img width="974" height="489" alt="диаграмма развертывания" src="https://github.com/user-attachments/assets/f31f2a55-e618-41b6-93cc-739f8934f748" />
<img width="4386" height="4542" alt="диаграмма классов" src="https://github.com/user-attachments/assets/5c245626-38c0-4b0a-9b8f-e12f85c42ca6" />
<img width="1214" height="1974" alt="диаграмма деятельности" src="https://github.com/user-attachments/assets/89c67fcb-69d6-44a8-9e3f-462ba8f6778a" />
<img width="636" height="941" alt="диаграмма состояний" src="https://github.com/user-attachments/assets/308f916a-5199-456f-9e78-74a24ddf2c6c" />
<img width="1206" height="958" alt="вариантов использования2" src="https://github.com/user-attachments/assets/ea32cdeb-1524-48a8-aa21-0e8197b7b6ab" />


2 СИСТЕМА ДИЗАЙНА ПОЛЬЗОВАТЕЛЬСКОГО ИНТЕРФЕЙСА

В программном средстве разработана система дизайна пользовательского интерфейса. Она включает набор стандартных элементов и правил оформления, которые используются во всех модулях приложения. На рисунке 4 представлен UI Kit программного средства.

<img width="974" height="675" alt="image" src="https://github.com/user-attachments/assets/cb7646d9-1a39-41f4-8614-0e3e6eb8093d" />

Рисунок 4 – UI Kit программного средства 

В систему входят основные компоненты: кнопки, переключатели, чекбоксы, радиокнопки, поля для ввода текста и выпадающие списки. Для выбора дат используется календарь, а для подсказок всплывающие окна с пояснениями. Также предусмотрены иконки для быстрых действий и цветовые обозначения для разных статусов. Определены единые правила для текста – используются одинаковые шрифты и размеры, чтобы информация выглядела аккуратно и легко читалась.
Дополнительно предусмотрены анимации загрузки, которые показывают, что система обрабатывает запрос. 
Основой цветовой гаммы станут оттенки синего и серого, которые создают ощущение надёжности и стабильности. Для акцентных элементов, таких как кнопок действий и ключевых уведомлений – будут использоваться более яркие цвета: зелёный для успешных операций и красный для ошибок.

3 АРХИТЕКТУРА

<img width="974" height="1103" alt="image" src="https://github.com/user-attachments/assets/da7ee30f-7927-4e6a-8e64-b61291c3af84" />

ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС
<img width="1920" height="901" alt="кредитный менеджер - главная" src="https://github.com/user-attachments/assets/9aa2f8f0-4356-4fe6-8dcb-d43e19b913d4" />
<img width="1920" height="917" alt="кредитный менеджер - документ" src="https://github.com/user-attachments/assets/fc66540f-fb0c-4019-888e-aade3d0c3cc6" />
<img width="1920" height="912" alt="кредитный менеджер - прикрепление документа" src="https://github.com/user-attachments/assets/dc1fc067-b0f9-43fe-9779-9be4729ee739" />
<img width="1920" height="912" alt="кредитный менеджер - полная анкета" src="https://github.com/user-attachments/assets/85c13fc6-7a17-46d2-81bf-41f7d84491ea" />
<img width="1920" height="902" alt="кредитный менеджер - скоринг принятия решения" src="https://github.com/user-attachments/assets/9da73c9d-1c32-4a7c-a3ee-d772e9e429a9" />
<img width="1920" height="912" alt="риск-менеджер этап принятия решения" src="https://github.com/user-attachments/assets/1d22da7f-3435-4f67-b8ed-f86a353cc88c" />
<img width="1920" height="907" alt="админ - кредитные программы" src="https://github.com/user-attachments/assets/79834374-0d82-47cc-b2d1-9173083def24" />
<img width="1920" height="396" alt="админ - отчетность" src="https://github.com/user-attachments/assets/3c14dfd9-18fe-439b-af33-fbb1f9922f9d" />

БЕЗОПАСНОСТЬ:
Authorization Server – это центральный компонент системы OAuth2, отвечающий за выдачу, хранение и проверку токенов доступа. Он взаимодействует с базой данных, в которой хранится информация о клиентах и пользователях системы.
Используемая конфигурация позволяет гибко управлять политикой доступа и поддерживает разные типы клиентов — от браузерного интерфейса до серверных приложений. Это особенно важно для системы «Кредитный конвейер», в которой предусмотрены как внутренние пользовательские роли (менеджеры, администраторы), так и интеграции с внешними сервисами.
Пример конфигурации Authorization Server представлен ниже:

@Configuration
@EnableAuthorizationServer
public class OAuth2Config implements AuthorizationServerConfigurer {

    @Autowired
    private DataSource dataSource;

    @Override
    public void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception {
        oauthServer
                .tokenKeyAccess("permitAll()")  // Разрешаем доступ к endpoint получения токена
                .checkTokenAccess("isAuthenticated()");  // Проверка токена требует аутентификации
    }

    @Override
    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
        clients.jdbc(dataSource)
                .withClient("browser")
                .secret("{noop}secret")
                .authorizedGrantTypes("password", "refresh_token")
                .scopes("api")
                .and()
                .withClient("application-service")
                .secret("{noop}secret")
                .authorizedGrantTypes("client_credentials")
                .scopes("server");
    }

    @Bean
    public JdbcTokenStore tokenStore() {
        return new CustomJdbcTokenStore(dataSource);
    }
}
Для повышения надежности работы с токенами была создана кастомная реализация JdbcTokenStore, которая обрабатывает исключительные ситуации, возникающие при повреждении токенов (например, из-за сбоев при сериализации или устаревших записей в БД).

@Slf4j
public class CustomJdbcTokenStore extends JdbcTokenStore {

    public CustomJdbcTokenStore(DataSource dataSource) {
        super(dataSource);
    }

    @Override
    public OAuth2AccessToken readAccessToken(String tokenValue) {
        OAuth2AccessToken accessToken = null;

        try {
            accessToken = new DefaultOAuth2AccessToken(tokenValue);
        }
        catch (EmptyResultDataAccessException e) {
            log.info("Failed to find access token for token {}", tokenValue);
        }
        catch (IllegalArgumentException e) {
            log.warn("Failed to deserialize access token for {}", tokenValue, e);
            removeAccessToken(tokenValue);
        }
        return accessToken;
    }
}
Одним из ключевых компонентов системы безопасности в «Кредитном конвейере» является сервис аудита (AuditLogService).
Он регистрирует все критические действия пользователей и системных компонентов: создание, изменение и удаление сущностей, входы в систему, попытки доступа без достаточных прав и другие важные события.

@Service
public class AuditLogService {

    public void create(AuditEventTypeEnum eventType, String entityType, 
                      String entityId, String description, Object details) {
        AuditLog auditLog = new AuditLog();
        auditLog.setEventType(eventType);
        auditLog.setEntityType(entityType);
        auditLog.setEntityId(entityId);
        auditLog.setDescription(description);
        auditLog.setDetails(serializeDetails(details));
        auditLog.setTimestamp(LocalDateTime.now());
        auditLog.setUsername(SecurityUtils.getCurrentUsername());
        
        auditLogRepository.save(auditLog);
    }
}
Для безопасного взаимодействия между фронтендом и бэкендом настроен Cross-Origin Resource Sharing (CORS).
Это предотвращает несанкционированный доступ к API из сторонних доменов и позволяет гибко определять доверенные источники запросов.

@Configuration
public class WebCorsConfig implements WebMvcConfigurer {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/**")
                .allowedOrigins("https://frontend.example.com")
                .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")
                .allowCredentials(true)
                .maxAge(3600);
    }
}

Дополнительно в конфигурации Spring Security включены следующие механизмы:
	HTTP Strict Transport Security (HSTS) — принудительное использование HTTPS;
	Content Security Policy (CSP) — предотвращение XSS-атак;
	Rate Limiting — ограничение частоты запросов для защиты от brute-force атак на токены и логины;
	Security Headers — настройка заголовков X-Content-Type-Options, X-Frame-Options, Referrer-Policy.

ВЫВОДЫ

В ходе выполнения лабораторной работы была спроектирована и описана архитектура программного средства «Кредитный конвейер» для обработки и принятия решений по кредитным заявкам физических лиц. Система рассмотрена на контейнерном, компонентном и кодовом уровнях, что позволило показать её структуру и логику работы. Дополнительно разработана система дизайна пользовательского интерфейса, включающая набор стандартных элементов, правила оформления и цветовую палитру, обеспечивающую единый стиль и удобство взаимодействия. Проведённый анализ и рефакторинг кода позволили выделить ключевые сущности, разделить ответственность между компонентами и упростить дальнейшее сопровождение. В результате получено программное средство с чёткой архитектурой, удобным интерфейсом и возможностью масштабирования, что соответствует поставленной цели работы.
